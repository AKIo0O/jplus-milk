/** * @author  xuld */using("Controls.Core.IInput");/** * 表示一个数据选择器。 * @abstract class * @extends Control
 */var Picker = Control.extend(IInput).implement({		tpl: '<span class="x-picker">\			<input type="text" class="x-textbox"/>\		</span>',			menuButtonTpl: '<button class="x-button"><span class="x-button-menu"></span></button>',		/**	 * 获取当前输入域实际用于提交数据的表单域。	 * @return {Dom} 一个用于提交表单的数据域。	 */	input: function(){				// 如果不存在隐藏域。		if(!this.hiddenField) {						var textBox = this.find('.x-textbox');						if(textBox){				return textBox;				}						this.hiddenField = Dom.parse('<input type="hidden">').appendTo(this);			this.hiddenField.setAttr('name', Dom.getAttr(this.node, 'name'));		}				return this.hiddenField;	},		/**	 * 获取当前控件的按钮部分。
	 */	button: function(){		return this.find('button');	},		/**	 * @protected	 * @override	 */	init: function(){				// 如果是 <input> 或 <a> 直接替换为 x-picker		if(/^(INPUT|A)$/.test(this.node.tagName) && !this.hasClass('x-picker')) {			var elem = this.node;						// 创建 x-picker 组件。			this.node = Dom.createNode('span', 'x-picker x-' + this.xtype);						// 替换当前节点。			if(elem.parentNode){				elem.parentNode.replaceChild(this.node, elem);			}						// 插入原始 <input> 节点。			this.prepend(elem);		}				// 如果没有下拉菜单按钮，添加之。		if(!this.button()) {			this.append(this.menuButtonTpl);			}			},		disabled: function(value){		value = value !== false;				// 子节点全部设置样式。		this.children().setAttr("disabled", value);				// 为按钮增加 disabled 样式。		this.query('.x-textbox').toggleClass("x-textbox-disabled", value);				// 为按钮增加 disabled 样式。		this.query('.x-button').toggleClass("x-button-disabled", value);	},		readOnly: function(value){				value = value !== false;				// 子节点全部设置样式。		this.input().setAttr("readonly", value);				// 为按钮增加 disabled 样式。		this.query('.x-textbox').toggleClass("x-textbox-readonly", value);	}}).addEvents('change', {	add: function(picker, type, fn){		Dom.$event.$default.add(picker.input(), type, fn);	},	remove: function(picker, type, fn){		Dom.$event.$default.remove(picker.input(), type, fn);	}});