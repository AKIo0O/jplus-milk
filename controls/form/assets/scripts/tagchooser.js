/** * @author  xuld *//** * 一个标签选择器。 */var TagChooser = Class({		prefix: '✚ ',		onChange: function(){		var content = ' ' + this.target.getText() + ' ';				this.tags.each(function(value){			value = Dom.get(value);			value.toggleClass('x-tagchooser-selected', content.indexOf(' ' + value.getText().substr(2) + ' ') > -1);		});			},		onTagClick: function(tag){		var value = this.target.getText(), newValue = tag.getText().substr(this.prefix.length);		if(tag.hasClass('x-tagchooser-selected')) {			this.target.setText((' ' + value + ' ').replace(' ' + newValue + ' ', ' ').trim());			tag.removeClass('x-tagchooser-selected');		} else if((' ' + value + ' ').indexOf(' ' + newValue + ' ') === -1) {			tag.addClass('x-tagchooser-selected');			this.target.setText(  (value ? value + ' ' : value) + newValue);		} else {			tag.addClass('x-tagchooser-selected');		}	},		constructor: function(target, tags, prefix){				var me = this;				me.target = Dom.get(target);		me.tags = Dom.query(tags);				if(prefix !== undefined){			this.prefix = prefix;		}				me.tags.on('click', function(){			me.onTagClick(this);		}).each(function(value){			var node = Dom.get(value);			node.setText(this.prefix + node.getText());			}, me);				me.target.on('keyup', me.onChange, me);				me.onChange();			}});